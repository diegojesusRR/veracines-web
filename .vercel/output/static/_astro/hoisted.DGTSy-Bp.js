import{$ as v}from"./hoisted.BJwJ80XN.js";import"./index.BXBeSuXa.js";document.addEventListener("astro:page-load",()=>{const n=document.querySelector(".carousel"),e=document.querySelector("[data-btn-prev]"),t=document.querySelector("[data-btn-next]"),r=document.querySelector("[data-clip-index]"),a=document.querySelectorAll("[data-clip-item]");let i=0;const s=()=>{window.innerWidth<768?a.forEach((l,o)=>{l.classList.toggle("hidden",o!==i),l.classList.toggle("block",o===i)}):a.forEach(l=>{l.classList.remove("hidden"),l.classList.add("block")}),r&&(r.innerHTML=`Cita ${i+1}/${n?.children.length}`)};e?.addEventListener("click",()=>{i--,i<0&&(i=(n?.children.length??1)-1),s()}),t?.addEventListener("click",()=>{i++,n?.children.length&&i>=n?.children.length&&(i=0),s()}),window.addEventListener("resize",s),s()});document.addEventListener("astro:page-load",()=>{const n=document.getElementById("lightbox"),e=document.getElementById("boxer-gallery");if(!e)return;const t=e?.querySelectorAll("a"),r=n?.querySelector("button"),a=o=>{const c=n?.querySelector(".boxer-gallery-img"),u=o.querySelector("img");c&&u&&(c.src=u.src)},i=()=>{n.close()},s=()=>{(e.querySelector("a[data-current=true]").previousElementSibling||e.querySelector("a:last-of-type")).click()},l=()=>{const o=e.querySelector("a[data-current=true]");(o.nextElementSibling?.nodeName==="A"?o.nextElementSibling:e.querySelector("a:first-of-type")).click()};document.addEventListener("click",o=>{if(!n.open)return;const c=o.target,u=c.title.includes("anterior"),h=c.title.includes("siguiente");u&&s(),h&&l()}),document.addEventListener("keydown",o=>{n.open&&(o.key==="Escape"&&i(),o.key==="ArrowRight"&&l(),o.key==="ArrowLeft"&&s())}),r?.addEventListener("click",i),n?.addEventListener("click",o=>{const c=document.querySelector("[data-dialog-bg]");(o.target===c||o.target===n)&&i()}),t.forEach(o=>o.addEventListener("click",c=>{if(c.preventDefault(),e.querySelector("a[data-current=true]")?.removeAttribute("data-current"),o.setAttribute("data-current","true"),n.open&&document.startViewTransition){document.startViewTransition(()=>{a(o)});return}else a(o);n.open||n.showModal()}))});document.addEventListener("astro:page-load",()=>{const n=document.querySelectorAll(".clip-container"),e=document.querySelector(".clip-dialog"),t=document.querySelector(".close-dialog"),r=document.querySelector(".yt-iframe");e&&(e.addEventListener("close",()=>{r?.setAttribute("src","")}),t?.addEventListener("click",()=>e.close()),e.addEventListener("click",a=>{a.target===e&&e.close()}),n?.forEach(a=>{a.addEventListener("click",async i=>{const s=i.currentTarget,{url:l}=s.dataset;l&&(r?.setAttribute("src",`${l}&autoplay=1`),e.showModal())})}))});class d extends HTMLElement{connectedCallback(){const e=this.getAttribute("videoid").split("?");this.videoId=e[0],this.short=e[1];let t=this.querySelector(".lty-playbtn");if(this.playLabel=t&&t.textContent.trim()||this.getAttribute("playlabel")||"Reproducir presentación de La Velada del Año",this.dataset.title=this.getAttribute("title")||"",this.style.backgroundImage||(this.style.backgroundImage=`url("https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg")`,this.upgradePosterImage()),t||(t=document.createElement("button"),t.type="button",t.classList.add("lty-playbtn"),this.append(t)),!t.textContent){const r=document.createElement("span");r.className="lyt-visually-hidden",r.textContent=this.playLabel,t.append(r)}this.addNoscriptIframe(),this.addEventListener("pointerover",d.warmConnections,{once:!0}),this.addEventListener("click",this.activate),this.addEventListener("keydown",this.handleKeyPress),this.needsYTApi=this.hasAttribute("js-api")||navigator.vendor.includes("Apple")||navigator.userAgent.includes("Mobi")}static addPrefetch(e,t,r){const a=document.createElement("link");a.rel=e,a.href=t,r&&(a.as=r),document.head.append(a)}static warmConnections(){d.preconnected||(d.addPrefetch("preconnect","https://www.youtube-nocookie.com"),d.addPrefetch("preconnect","https://www.google.com"),d.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),d.addPrefetch("preconnect","https://static.doubleclick.net"),d.preconnected=!0)}fetchYTPlayerApi(){window.YT||window.YT&&window.YT.Player||(this.ytApiPromise=new Promise((e,t)=>{const r=document.createElement("script");r.src="https://www.youtube.com/iframe_api",r.async=!0,r.onload=a=>{YT.ready(e)},r.onerror=t,this.append(r)}))}async getYTPlayer(){return this.playerPromise||await this.activate(),this.playerPromise}async addYTPlayerIframe(){this.fetchYTPlayerApi(),await this.ytApiPromise;const e=document.createElement("div");this.append(e);const t=Object.fromEntries(this.getParams().entries());this.playerPromise=new Promise(r=>{const a=new YT.Player(e,{width:"100%",videoId:this.videoId,playerVars:t,events:{onReady:i=>{i.target.playVideo(),r(a)}}})})}addNoscriptIframe(){const e=this.createBasicIframe(),t=document.createElement("noscript");t.innerHTML=e.outerHTML,this.append(t)}getParams(){const e=new URLSearchParams(this.getAttribute("params")||[]);return e.append("autoplay","1"),e.append("playsinline","1"),e.append("color","white"),e}async activate(){if(this.classList.contains("lyt-activated"))return;const e=this.querySelector(".lty-playbtn");if(e&&e.hasAttribute("href")&&e.removeAttribute("href"),this.classList.add("lyt-activated"),this.style.backgroundImage!=="unset"&&(this.style.backgroundImage="unset"),this.needsYTApi)return this.addYTPlayerIframe(this.getParams());const t=this.createBasicIframe();this.append(t),t.focus()}handleKeyPress(e){(e.code==="Enter"||e.code==="Space")&&this.activate()}createBasicIframe(){const e=document.createElement("iframe");return e.width=560,e.height=315,e.title=this.playLabel,e.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",e.allowFullscreen=!0,e.src=this.short?`https://www.youtube.com/embed/${encodeURIComponent(this.videoId)}?${this.getParams().toString()}&${this.short}`:`https://www.youtube-nocookie.com/embed/${encodeURIComponent(this.videoId)}?${this.getParams().toString()}`,e}upgradePosterImage(){setTimeout(()=>{const e=`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,t=new Image;t.fetchPriority="low",t.referrerpolicy="origin",t.src=e,t.onload=r=>{r.target.naturalHeight===90&&r.target.naturalWidth===120||(this.style.backgroundImage=`url("${e}")`)}},100)}}customElements.define("lite-youtube",d);const p={accent:"#b4cd02",white:"#fff","white-50":"rgba(255, 255, 255, 0.5)"};document.addEventListener("astro:page-load",()=>{const n=v("#velocimeter");if(!n)return;const e=n.getContext("2d");function t(){const a=Number.parseInt(n.getAttribute("data-percentage")??"50");r(a)}function r(a){if(!e)return;const i=n.width/2,s=n.height,l=75,o=(n.width-l*2)/2-10,c=e.createLinearGradient(0,0,0,n.height);c.addColorStop(0,p.accent),c.addColorStop(.25,p.accent),c.addColorStop(1,"transparent"),e.strokeStyle=c,e.clearRect(0,0,n.width,n.height),e.beginPath(),e.arc(i,s,o,Math.PI,2*Math.PI),e.lineWidth=l,e.stroke();const u=Math.PI,h=a/100*Math.PI+u,b=2,m=4,g=6,w=o*1.2,y=i+w*Math.cos(h),f=s-g+w*Math.sin(h);e.beginPath(),e.moveTo(i,s-g),e.lineTo(y,f),e.lineWidth=m,e.strokeStyle=p.white,e.stroke(),e.beginPath(),e.moveTo(y-5*Math.cos(h),f-5*Math.sin(h)),e.lineWidth=m*2,e.lineTo(y+m*4*Math.cos(h),f+m*4*Math.sin(h)),e.strokeStyle=p.white,e.stroke(),e.beginPath(),e.moveTo(i,0),e.lineTo(i,s),e.lineWidth=b,e.setLineDash([5,15]),e.strokeStyle=p["white-50"],e.stroke(),e.beginPath(),e.arc(i,s-g,g,0,2*Math.PI),e.fillStyle="#fff",e.fill()}t()});
